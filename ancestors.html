<div id="left">
  <div class="h" style="font-size:20px; margin-bottom: 20px;">検索</div>
  
  <input id="q" type="text" placeholder="品種名 / 登録者で検索（例：とちおとめ、栃木）" style="margin-bottom: 16px; border: 1px solid #d1d5db; padding: 12px;" />

  <div class="box" style="padding: 16px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
      <div class="h" style="margin:0;">品種リスト</div>
      <span id="listBadge" class="pill" style="background: #f3f4f6;">準備中…</span>
    </div>
    
    <p class="muted" style="margin-bottom: 12px;">行をクリックするとその品種へ移動します。</p>

    <div style="display: flex; gap: 8px; margin-bottom: 16px;">
      <button class="filter-btn active" onclick="filterList('all')">全品種</button>
      <button class="filter-btn" onclick="filterList('registered')">登録品種</button>
      <button class="filter-btn" onclick="filterList('no-parents')">親が不明</button>
    </div>

    <div id="listWrap" style="
      height: 45vh;
      overflow:auto;
      border:1px solid var(--border);
      border-radius:10px;
      background:#fff;">
      <div class="muted" style="padding:10px;">読み込み中…</div>
    </div>

    <ul class="muted" style="margin-top: 12px; padding-left: 16px; line-height: 1.6;">
      <li>全品種：本系統図に含まれるすべての品種</li>
      <li>登録品種：農林水産省による登録を受けた品種</li>
      <li>親が不明：情報を募集しています。</li>
    </ul>
  </div>

  <div class="box" style="background: var(--pink-50); border-color: var(--pink-300);">
    <div class="h">表示設定</div>
    <input id="name" type="text" placeholder="選択中の品種" readonly style="background: #eee;" />
    
    <div style="margin-top: 10px;">
      <div class="h" style="font-size: 13px;">遡る世代</div>
      <select id="depth">
        <option value="1">1代前（親）</option>
        <option value="2" selected>2代前（祖父母）</option>
        <option value="3">3代前（曾祖父母）</option>
        <option value="4">4代前（高祖父母）</option>
        <option value="5">5代前</option>
      </select>
    </div>

    <label style="display:flex; align-items:center; gap:8px; font-size:13px; margin:12px 0;">
      <input id="includeUnknown" type="checkbox" /> 不明(unknown)を含める
    </label>

    <button id="run" type="button" style="background: var(--pink-300); color: var(--wine); border: none;">系統図を表示</button>
  </div>
</div>

<style>
  .filter-btn {
    flex: 1;
    padding: 8px 4px !important;
    font-size: 12px !important;
    font-weight: normal !important;
    border-radius: 999px !important;
    border: 1px solid var(--border) !important;
    background: #fff !important;
  }
  .filter-btn.active {
    background: var(--pink-100) !important;
    border-color: var(--pink-300) !important;
    color: var(--wine);
  }
  th {
    position: sticky;
    top: 0;
    background: #f9fafb;
    z-index: 1;
    font-size: 11px;
    color: var(--wine);
    padding: 8px 10px;
    border-bottom: 2px solid var(--pink-100);
  }
</style>
